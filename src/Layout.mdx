import { Meta } from '@storybook/blocks';

<Meta title="Layout/Introduction" />

# Layout

This page describes how to build application layouts with DesignBricks using Flex or Grid components.

## Introduction

DesignBricks includes powerful layout components to help build consistent and responsive applications. The `Flex` and `Grid` components are containers responsible for the layout of their children. `Flex` follows the CSS flexbox algorithm, while `Grid` implements CSS grid. These components provide props with pre-defined spacing values and layout options from the design system.

You can use `Flex` and `Grid` together as needed to build different parts of your application, and even nest them to create more complex layouts.

In general, you should prefer using flex and grid over other CSS layout models. Spacing between components should be left to parent layout components rather than added via margins to specific children. This helps ensure components are composable when reused in different places and ensures spacing is consistent.

## Flex

The flexbox layout model is a simple yet versatile method of laying out components in rows and columns. You can use it to build vertical or horizontal stacks, simple wrapping grids, and more. The `Flex` component can be used to create flexbox containers, and any DesignBricks component can be used as a child.

The `gap`, `rowGap` and `columnGap` can be defined with design system spacing tokens to ensure consistency across applications and allow layouts to adapt to different devices automatically.

### Basic Example

This example shows a simple vertical stack, with a gap between each item defined using design tokens.

```jsx
<Flex direction="column" width="20" gap="3">
  <View backgroundColor="green-500" height="20" />
  <View backgroundColor="blue-500" height="20" />
  <View backgroundColor="orange-500" height="20" />
</Flex>
```

### Common Patterns

**Horizontal Stack with Space Between**
```jsx
<Flex justifyContent="space-between" alignItems="center">
  <Button>Left</Button>
  <Button>Right</Button>
</Flex>
```

**Centered Content**
```jsx
<Flex justifyContent="center" alignItems="center" style={{ height: '200px' }}>
  <Card>Centered Content</Card>
</Flex>
```

**Responsive Layout**
```jsx
<Flex direction="column" gap="4">
  <Flex justifyContent="space-between" alignItems="center">
    <Typography variant="h2">Page Title</Typography>
    <Button>Action</Button>
  </Flex>
  <Card>Main Content</Card>
</Flex>
```

**Responsive Direction**
```jsx
<Flex direction={{ base: 'column', md: 'row' }} gap="4">
  <Card>Item 1</Card>
  <Card>Item 2</Card>
  <Card>Item 3</Card>
</Flex>
```

**Nested Navigation Layout**
```jsx
<Flex direction="column" gap="4">
  <Flex justifyContent="space-between" alignItems="center">
    <div>Logo</div>
    <Flex gap="3">
      <Button>Home</Button>
      <Button>About</Button>
      <Button>Contact</Button>
    </Flex>
  </Flex>
  <Flex gap="4">
    <Flex direction="column" gap="3" grow={1}>
      <Card>Main Content</Card>
      <Flex gap="2">
        <Card style={{ flex: 1 }}>Sub Item 1</Card>
        <Card style={{ flex: 1 }}>Sub Item 2</Card>
      </Flex>
    </Flex>
    <Flex direction="column" gap="2" style={{ width: '200px' }}>
      <Card>Sidebar 1</Card>
      <Card>Sidebar 2</Card>
    </Flex>
  </Flex>
</Flex>
```

## Grid

CSS grid is a powerful way to lay out elements in two dimensions. It can be used to build full page application layouts or smaller user interface elements. It is especially powerful because it allows you to build many types of layouts without extra presentational elements, keeping your code clean and semantic.

The `Grid` component can be used as a container to define a grid layout. Any DesignBricks component can be used as a child of a `Grid`. The component supports defining grids using design system spacing values for consistent sizing and spacing.

### Defining Grids

There are many ways to define grids, but the simplest is to use the `areas` prop to declaratively specify your layout using named areas. This prop accepts an array of strings which represent rows. Within the rows, you specify space-separated names for grid areas. The children of the `Grid` can use the `GridItem` component with the `gridArea` prop to place them into these named regions.

You can also define the `columns` and `rows` props on the `Grid` container to specify the widths and heights of the columns and rows respectively.

### Application Layout Example

```jsx
<Grid
  areas={[
    'header  header',
    'sidebar content',
    'footer  footer'
  ]}
  columns={['200px', '1fr']}
  rows={['60px', '1fr', '60px']}
  gap="4">
  <GridItem gridArea="header">
    <TopBar />
  </GridItem>
  <GridItem gridArea="sidebar">
    <Sidebar />
  </GridItem>
  <GridItem gridArea="content">
    <Card>Main Content</Card>
  </GridItem>
  <GridItem gridArea="footer">
    <Footer />
  </GridItem>
</Grid>
```

### Card Grid Example

```jsx
<Grid columns={['repeat(auto-fit, minmax(300px, 1fr))']} gap="4">
  <Card>Card 1</Card>
  <Card>Card 2</Card>
  <Card>Card 3</Card>
  <Card>Card 4</Card>
</Grid>
```

### Responsive Grid Areas

The following example shows how you could use responsive Grid areas to create layouts that adapt based on screen size.

```jsx
<Grid
  areas={{
    base: [
      'header',
      'nav',
      'content',
      'footer'
    ],
    md: [
      'header   header',
      'nav      content',
      'nav      content',
      'footer   footer'
    ],
    lg: [
      'header header  header',
      'nav    content aside',
      'nav    content aside',
      'footer footer  footer'
    ]
  }}
  columns={{
    md: ['12', '1fr'],
    lg: ['12', '1fr', '12']
  }}
  gap="3">
  <GridItem gridArea="header">
    <TopBar />
  </GridItem>
  <GridItem gridArea="nav">
    <Navigation />
  </GridItem>
  <GridItem gridArea="content">
    <Card>Main Content</Card>
  </GridItem>
  <GridItem gridArea="aside" isHidden={{ base: true, lg: false }}>
    <Sidebar />
  </GridItem>
  <GridItem gridArea="footer">
    <Footer />
  </GridItem>
</Grid>
```

### Responsive Card Grid

```jsx
<Grid
  columns={{
    base: ['1fr'],
    sm: ['repeat(2, 1fr)'],
    md: ['repeat(3, 1fr)'],
    lg: ['repeat(4, 1fr)']
  }}
  gap={{ base: '3', md: '4' }}>
  <Card>Product 1</Card>
  <Card>Product 2</Card>
  <Card>Product 3</Card>
  <Card>Product 4</Card>
  <Card>Product 5</Card>
  <Card>Product 6</Card>
</Grid>
```

### Spanning Items

```jsx
<Grid columns={['repeat(4, 1fr)']} gap="3">
  <GridItem colSpan={2}>
    <Card>Spans 2 columns</Card>
  </GridItem>
  <Card>Regular item</Card>
  <Card>Regular item</Card>
  <Card>Regular item</Card>
  <GridItem rowSpan={2}>
    <Card>Spans 2 rows</Card>
  </GridItem>
  <Card>Regular item</Card>
</Grid>
```

## Responsive Design

Both `Flex` and `Grid` components support responsive design through breakpoint-based props.

### Breakpoint System
- `base` - Default (mobile-first)
- `sm` - 640px and up
- `md` - 768px and up  
- `lg` - 1024px and up
- `xl` - 1280px and up
- `2xl` - 1536px and up

### Responsive Props
Most layout props accept either a single value or an object with breakpoint keys:

```jsx
<Flex
  direction={{ base: 'column', md: 'row' }}
  gap={{ base: '2', lg: '4' }}
  justifyContent={{ base: 'center', md: 'space-between' }}
>
  <Card>Responsive layout</Card>
</Flex>
```

### Hidden Elements
Use the `isHidden` prop to show/hide elements at different breakpoints:

```jsx
<GridItem gridArea="sidebar" isHidden={{ base: true, lg: false }}>
  <Sidebar /> {/* Hidden on mobile, visible on desktop */}
</GridItem>
```

## Design Tokens Integration

Both `Flex` and `Grid` components integrate with the DesignBricks design tokens system:

### Spacing Values
- `gap`, `rowGap`, `columnGap` accept spacing token keys: `0`, `1`, `2`, `3`, `4`, `5`, `6`, `8`, `10`, `12`, `16`, `20`, `24`, `28`, `32`
- These map to consistent pixel values from the design system

### Dimension Values
- `width`, `height`, `minWidth`, `maxWidth`, `minHeight`, `maxHeight` accept:
  - Spacing tokens (e.g., `'20'` for 80px)
  - CSS values (e.g., `'100%'`, `'50vh'`, `'auto'`)

### Best Practices

1. **Use layout components for spacing** - Avoid adding margins to individual components. Let parent layout containers handle spacing.

2. **Prefer semantic layouts** - Use named grid areas for complex layouts rather than manual positioning.

3. **Combine Flex and Grid** - Use Grid for overall page structure and Flex for component-level layouts.

4. **Use design tokens** - Always use spacing tokens rather than arbitrary values for consistent spacing.

5. **Keep it simple** - Start with simple layouts and add complexity only when needed.

## Available Components

### Flex
- `<Flex>` - Flexbox container component
- Props: `direction`, `wrap`, `justifyContent`, `alignItems`, `gap`, `grow`, `shrink`, etc.

### Grid
- `<Grid>` - CSS Grid container component  
- `<GridItem>` - Individual grid item component
- Props: `areas`, `columns`, `rows`, `gap`, `gridArea`, `colSpan`, `rowSpan`, etc.

## Learn More

- [MDN Flexbox Guide](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox)
- [MDN CSS Grid Guide](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)
- [CSS-Tricks Flexbox Guide](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)
- [CSS-Tricks Grid Guide](https://css-tricks.com/snippets/css/complete-guide-grid/)
