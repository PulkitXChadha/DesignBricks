import{j as _,a as ie}from"./jsx-runtime-D2eXtamC.js";import{r as y}from"./index-SE77F2UD.js";import{c as U}from"./clsx-B-dksMZM.js";import{f as le,s as we,C as Ae,D as Fe}from"./ChartTooltip-Ckz6r7Tp.js";import{t as Pe,c as Le,s as Ve,a as Me}from"./step-BPRPw3R2.js";import{e as I,l as $e,c as qe}from"./line-BLb5Qx5M.js";import{l as re,a as se,b as oe}from"./linear-Bfi9Vb7F.js";import{b as Te}from"./band-BzzEMzBQ.js";import{p as Ee}from"./pointer-Drloq0xg.js";const Ne=y.createContext(null),ce={primary:"#2272B4",secondary:"#04867D",success:"#3BA65E",warning:"#DE7921",error:"#E65B77",info:"#1890FF",neutral:"#8396A5"},de=["#2272B4","#04867D","#3BA65E","#DE7921","#E65B77","#1890FF","#8396A5","#722ED1","#FA8C16","#13C2C2"],W=y.forwardRef(({series:z=[],width:F=600,height:P=400,variant:h="default",title:N,curve:O="smooth",xAxis:ue,yAxis:me,grid:fe,theme:he,animation:Ge,legend:pe,showPoints:J=!0,tooltip:t,showTooltip:B=!0,formatTooltip:K,showPercentageChange:Re=!1,keyboard:Q=!1,ariaLabel:ye,themeClass:be,optimized:xe=!1,hoverDebounce:Xe=0,className:Z,...Y},ee)=>{const G=y.useRef(null),_e=y.useRef(null),[ge,M]=y.useState(!1),[ve,te]=y.useState({x:0,y:0}),[L,$]=y.useState(null),c=y.useMemo(()=>z.filter(a=>a.visible!==!1),[z]),f={show:!0,position:"bottom",variant:h==="minimal"?"minimal":"default",tickCount:h==="detailed"?8:6,...ue},b={show:!0,position:"left",variant:h==="minimal"?"minimal":"default",tickCount:h==="detailed"?8:6,...me},V={show:h!=="minimal",strokeDasharray:h==="detailed"?"1,3":"2,2",opacity:h==="detailed"?.2:.3,...fe},j={colorScheme:"auto",cssVars:{"--chart-line-width":h==="detailed"?"3px":"2px","--chart-point-size":h==="detailed"?"6px":"4px"},...he},R={show:c.length>1,position:"bottom",...pe},o={enabled:(t==null?void 0:t.enabled)!==void 0?t.enabled:B,component:t==null?void 0:t.component,content:(t==null?void 0:t.content)||K,style:t==null?void 0:t.style,placement:(t==null?void 0:t.placement)||{placement:"auto",offset:{x:0,y:-10}},className:t==null?void 0:t.className,animationDuration:(t==null?void 0:t.animationDuration)||200,showDelay:(t==null?void 0:t.showDelay)||0,hideDelay:(t==null?void 0:t.hideDelay)||0,...t},u={top:N?40:20,right:20,bottom:(f.label?60:40)+(R.show&&R.position==="bottom"?40:0),left:b.label?80:60},w=F-u.left-u.right,g=P-u.top-u.bottom,k=y.useMemo(()=>c.flatMap(a=>a.data),[c]),{xScale:v,yScale:C,lineGenerator:H}=y.useMemo(()=>{if(!k.length)return{xScale:null,yScale:null,lineGenerator:null};const a=k[0].x,r=a instanceof Date,s=typeof a=="number";let e;if(r)e=Pe().domain(I(k,i=>i.x)).range([0,w]);else if(s)e=re().domain(I(k,i=>i.x)).range([0,w]);else{const i=Array.from(new Set(k.map(d=>d.x)));e=Te().domain(i).range([0,w]).padding(.1)}const n=re().domain(I(k,i=>i.y)).nice().range([g,0]),l=O==="smooth"?Le:O==="step"?Ve:qe,m=$e().x(i=>e(i.x)||0).y(i=>n(i.y)||0).curve(l);return{xScale:e,yScale:n,lineGenerator:m}},[k,w,g,O]),q=y.useMemo(()=>{var r;if(f.tickFormatter)return f.tickFormatter;const a=(r=k[0])==null?void 0:r.x;if(a instanceof Date){const s=Me("%b %d");return e=>e instanceof Date?s(e):String(e)}if(typeof a=="number"){const s=le(".2f");return e=>typeof e=="number"?s(e):String(e)}return s=>String(s)},[k,f.tickFormatter]),T=b.tickFormatter||le(".2f"),E=(a,r)=>a.customColor?a.customColor:a.color&&ce[a.color]?ce[a.color]:de[r%de.length],Ce=K||(a=>{if(!a.length)return"";const r=q(a[0].dataPoint.x);let s='<div class="db-multilinechart__tooltip-content">';return s+=`<div class="db-multilinechart__tooltip-date">${r}</div>`,a.forEach(({series:e,dataPoint:n})=>{const l=T(n.y),m=E(e,c.indexOf(e));s+='<div class="db-multilinechart__tooltip-series">',s+=`<div class="db-multilinechart__tooltip-series-indicator" style="background-color: ${m}"></div>`,s+=`<span class="db-multilinechart__tooltip-series-name">${e.name}:</span>`,s+=`<span class="db-multilinechart__tooltip-series-value">${l}</span>`,s+="</div>"}),s+="</div>",s});if(y.useEffect(()=>{if(!G.current||!c.length||!v||!C||!H)return;const a=we(G.current);a.selectAll("*").remove();const r=a.append("g").attr("transform",`translate(${u.left},${u.top})`);if(V.show&&(r.append("g").attr("class","db-multilinechart__grid db-multilinechart__grid--x").attr("transform",`translate(0,${g})`).call(se(v).tickSize(-g).tickFormat(()=>"")).selectAll("line").style("stroke-dasharray",V.strokeDasharray||"2,2").style("opacity",V.opacity||.3),r.append("g").attr("class","db-multilinechart__grid db-multilinechart__grid--y").call(oe(C).tickSize(-w).tickFormat(()=>"")).selectAll("line").style("stroke-dasharray",V.strokeDasharray||"2,2").style("opacity",V.opacity||.3)),f.show){const e=r.append("g").attr("class",`db-multilinechart__axis db-multilinechart__axis--x db-multilinechart__axis--${f.variant}`).attr("transform",`translate(0,${g})`),n=se(v);f.tickCount&&n.ticks(f.tickCount),f.tickFormatter?n.tickFormat(l=>f.tickFormatter(l)):n.tickFormat(l=>q(l)),e.call(n)}if(b.show){const e=r.append("g").attr("class",`db-multilinechart__axis db-multilinechart__axis--y db-multilinechart__axis--${b.variant}`),n=oe(C);b.tickCount&&n.ticks(b.tickCount),b.tickFormatter?n.tickFormat(l=>b.tickFormatter(l)):n.tickFormat(l=>T(l)),e.call(n)}if(c.forEach((e,n)=>{const l=E(e,n);if(r.append("path").datum(e.data).attr("class",`db-multilinechart__line db-multilinechart__line--series-${n}`).attr("d",H).style("stroke",l).style("stroke-width",e.strokeWidth||(h==="detailed"?3:2)).style("stroke-dasharray",e.strokeDasharray||"none"),J){const m=r.selectAll(`.db-multilinechart__point--series-${n}`).data(e.data).enter().append("circle").attr("class",`db-multilinechart__point db-multilinechart__point--series-${n}`).attr("cx",i=>v(i.x)||0).attr("cy",i=>C(i.y)||0).attr("r",h==="detailed"?5:4).style("fill",l);Q&&m.attr("tabindex",0).attr("role","button").attr("aria-label",(i,d)=>`${e.name} data point ${d+1}: ${q(i.x)}, ${T(i.y)}`).on("focus",function(i,d){const p=e.data.indexOf(d);if(o.enabled){const D=v(d.x)||0,x=C(d.y)||0,S=[{series:e,dataPoint:d,index:p}];te({x:D+u.left,y:x+u.top}),$({dataPoints:S}),M(!0)}}).on("blur",function(){o.enabled&&(M(!1),$(null))})}}),o.enabled){let e=null,n=null;const l=r.append("line").attr("class","db-multilinechart__vertical-line").attr("y1",0).attr("y2",g).style("opacity",0),m=c.map((i,d)=>{const p=E(i,d);return r.append("circle").attr("class",`db-multilinechart__hover-circle db-multilinechart__hover-circle--series-${d}`).attr("r",6).style("fill",p).style("opacity",0)});r.append("rect").attr("class","db-multilinechart__overlay").attr("width",w).attr("height",g).style("fill","none").style("pointer-events","all").on("mousemove",function(i){const[d]=Ee(i),p=[];if(c.forEach(D=>{var X;let x=D.data[0],S=0,A=Math.abs((v((X=D.data[0])==null?void 0:X.x)||0)-d);D.data.forEach((ae,ke)=>{const Se=v(ae.x)||0,ne=Math.abs(Se-d);ne<A&&(A=ne,x=ae,S=ke)}),x&&p.push({series:D,dataPoint:x,index:S,distance:A})}),p.length>0){const D=p.reduce((S,A)=>A.distance<S.distance?A:S),x=v(D.dataPoint.x)||0;l.style("opacity",1).attr("x1",x).attr("x2",x),p.forEach(({series:S,dataPoint:A})=>{const X=C(A.y)||0;m[c.indexOf(S)].style("opacity",1).attr("cx",x).attr("cy",X)}),n&&(clearTimeout(n),n=null),o.showDelay&&o.showDelay>0?(e&&clearTimeout(e),e=window.setTimeout(()=>{s(p,x+u.left,(C(D.dataPoint.y)||0)+u.top)},o.showDelay)):s(p,x+u.left,(C(D.dataPoint.y)||0)+u.top)}}).on("mouseout",()=>{e&&(clearTimeout(e),e=null),o.hideDelay&&o.hideDelay>0?n=window.setTimeout(()=>{M(!1),$(null)},o.hideDelay):(M(!1),$(null)),l.style("opacity",0),m.forEach(i=>i.style("opacity",0))})}function s(e,n,l){const m=e.map(({series:i,dataPoint:d,index:p})=>({series:i,dataPoint:d,index:p}));te({x:n,y:l}),$({dataPoints:m}),M(!0)}if(f.label&&r.append("text").attr("class","db-multilinechart__axis-label db-multilinechart__axis-label--x").attr("transform",`translate(${w/2}, ${g+40})`).style("text-anchor","middle").text(f.label),b.label&&r.append("text").attr("class","db-multilinechart__axis-label db-multilinechart__axis-label--y").attr("transform","rotate(-90)").attr("y",0-u.left+20).attr("x",0-g/2).style("text-anchor","middle").text(b.label),N&&a.append("text").attr("class","db-multilinechart__title").attr("x",F/2).attr("y",25).style("text-anchor","middle").text(N),R.show&&c.length>1){const n=a.append("g").attr("class","db-multilinechart__legend").attr("transform",`translate(${u.left}, ${P-30})`).selectAll(".db-multilinechart__legend-item").data(c).enter().append("g").attr("class","db-multilinechart__legend-item").attr("transform",(l,m)=>`translate(${m*120}, 0)`);n.append("line").attr("x1",0).attr("x2",15).attr("y1",0).attr("y2",0).style("stroke",(l,m)=>E(l,m)).style("stroke-width",2),n.append("text").attr("x",20).attr("y",0).attr("dy","0.32em").style("font-size","12px").style("fill","#37444F").text(l=>l.name)}},[c,F,P,v,C,H,V.show,J,B,f.label,b.label,N,u,w,g,q,T,Ce,R.show]),!c.length)return _("div",{ref:ee,className:U("db-multilinechart","db-multilinechart--empty",Z),...Y,children:_("div",{className:"db-multilinechart__empty-state",children:_("p",{children:"No data available"})})});const De={series:c,width:F,height:P,xScale:v,yScale:C,svgRef:G};return _(Ne.Provider,{value:De,children:ie("div",{ref:ee,className:U("db-multilinechart",`db-multilinechart--${h}`,{"db-multilinechart--optimized":xe,"db-multilinechart--keyboard":Q},be,Z),"data-theme":j.colorScheme!=="auto"?j.colorScheme:void 0,style:{...j.cssVars,...Y.style||{}},role:"img","aria-label":ye||`Multi-line chart with ${c.length} data series`,...Y,children:[_("svg",{ref:G,className:"db-multilinechart__svg",width:F,height:P,role:"presentation","aria-hidden":"true"}),o.enabled&&L&&_(Ae,{visible:ge,position:ve,tooltipStyle:o.style,placement:o.placement,animationDuration:o.animationDuration,containerDimensions:{width:F,height:P},className:U("db-multilinechart__tooltip",o.className),role:"tooltip","aria-live":"polite",children:o.component?_(o.component,{data:L.dataPoints,chartDimensions:{width:F,height:P}}):o.content?_("div",{dangerouslySetInnerHTML:{__html:o.content(L.dataPoints)}}):ie("div",{className:"db-multilinechart__tooltip-content",children:[L.dataPoints.length>0&&_("div",{className:"db-chart-tooltip__label",children:q(L.dataPoints[0].dataPoint.x)}),L.dataPoints.map(({series:a,dataPoint:r},s)=>_(Fe,{label:a.name,value:T(r.y),color:E(a,c.indexOf(a))},`${a.name}-${s}`))]})}),B&&!o.enabled&&_("div",{ref:_e,className:"db-multilinechart__tooltip",role:"tooltip","aria-live":"polite"})]})})});W.displayName="MultiLineChart";try{W.displayName="MultiLineChart",W.__docgenInfo={description:"",displayName:"MultiLineChart",props:{series:{defaultValue:{value:"[]"},description:"Array of data series to display",name:"series",required:!1,type:{name:"MultiLineChartSeries[]"}},width:{defaultValue:{value:"600"},description:"Chart width",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"400"},description:"Chart height",name:"height",required:!1,type:{name:"number"}},variant:{defaultValue:{value:"default"},description:"Chart variant",name:"variant",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"detailed"'},{value:'"minimal"'}]}},title:{defaultValue:null,description:"Chart title",name:"title",required:!1,type:{name:"string"}},curve:{defaultValue:{value:"smooth"},description:"Curve type",name:"curve",required:!1,type:{name:"enum",value:[{value:'"step"'},{value:'"linear"'},{value:'"smooth"'}]}},xAxis:{defaultValue:null,description:"X-axis configuration",name:"xAxis",required:!1,type:{name:"MultiLineChartAxis"}},yAxis:{defaultValue:null,description:"Y-axis configuration",name:"yAxis",required:!1,type:{name:"MultiLineChartAxis"}},grid:{defaultValue:null,description:"Grid configuration",name:"grid",required:!1,type:{name:"MultiLineChartGrid"}},theme:{defaultValue:null,description:"Theme configuration",name:"theme",required:!1,type:{name:"MultiLineChartTheme"}},animation:{defaultValue:null,description:"Animation configuration",name:"animation",required:!1,type:{name:"MultiLineChartAnimation"}},legend:{defaultValue:null,description:"Legend configuration",name:"legend",required:!1,type:{name:"MultiLineChartLegend"}},showPoints:{defaultValue:{value:"true"},description:"Show data points on the lines",name:"showPoints",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"Enhanced tooltip configuration",name:"tooltip",required:!1,type:{name:"TooltipConfig<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number; }[]>"}},showTooltip:{defaultValue:{value:"true"},description:"@deprecated Use tooltip.enabled instead",name:"showTooltip",required:!1,type:{name:"boolean"}},formatTooltip:{defaultValue:null,description:"@deprecated Use tooltip.content instead",name:"formatTooltip",required:!1,type:{name:"((_dataPoints: { series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number; }[]) => string)"}},showPercentageChange:{defaultValue:{value:"false"},description:"Show percentage change in tooltip",name:"showPercentageChange",required:!1,type:{name:"boolean"}},keyboard:{defaultValue:{value:"false"},description:"Enable keyboard navigation",name:"keyboard",required:!1,type:{name:"boolean"}},ariaLabel:{defaultValue:null,description:"ARIA label for accessibility",name:"ariaLabel",required:!1,type:{name:"string"}},themeClass:{defaultValue:null,description:"Custom CSS class for theming",name:"themeClass",required:!1,type:{name:"string"}},optimized:{defaultValue:{value:"false"},description:"Enable performance optimizations",name:"optimized",required:!1,type:{name:"boolean"}},hoverDebounce:{defaultValue:{value:"0"},description:"Debounce hover events (ms)",name:"hoverDebounce",required:!1,type:{name:"number"}}}}}catch{}export{W as M};
