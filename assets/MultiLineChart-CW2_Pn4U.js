import{j as b}from"./jsx-runtime-LnmZrwv1.js";import{r as h}from"./index-CWnxZbJP.js";import{c as W}from"./clsx-B-dksMZM.js";import{f as ie,s as Se,C as Te,D as we}from"./ChartTooltip-DGQGfrCB.js";import{t as Me,c as Pe,s as Le,a as Ae}from"./step-CBO2jjIH.js";import{e as J,l as Fe,c as qe}from"./line-D7-gsV7M.js";import{l as ne,a as re,b as le}from"./linear-DS12kqSE.js";import{b as $e}from"./band-BpA5gmKc.js";import{p as Ee}from"./pointer-Drloq0xg.js";const je=h.createContext(null),se={primary:"#2272B4",secondary:"#04867D",success:"#3BA65E",warning:"#DE7921",error:"#E65B77",info:"#1890FF",neutral:"#8396A5"},oe=["#2272B4","#04867D","#3BA65E","#DE7921","#E65B77","#1890FF","#8396A5","#722ED1","#FA8C16","#13C2C2"],ce=h.forwardRef(({series:K=[],width:P=600,height:L=400,variant:y="default",title:j,curve:O="smooth",xAxis:de,yAxis:ue,grid:me,theme:fe,animation:Ve,legend:pe,showPoints:Q=!0,tooltip:t,showTooltip:X=!0,formatTooltip:z,showPercentageChange:Ne=!1,keyboard:B=!1,ariaLabel:he,themeClass:ye,optimized:be=!1,hoverDebounce:Ge=0,className:Z,...Y},ee)=>{const G=h.useRef(null),xe=h.useRef(null),[_e,V]=h.useState(!1),[ge,te]=h.useState({x:0,y:0}),[F,N]=h.useState(null),u=h.useMemo(()=>K.filter(a=>a.visible!==!1),[K]),c={show:!0,position:"bottom",variant:y==="minimal"?"minimal":"default",tickCount:y==="detailed"?8:6,...de},f={show:!0,position:"left",variant:y==="minimal"?"minimal":"default",tickCount:y==="detailed"?8:6,...ue},T={show:y!=="minimal",strokeDasharray:y==="detailed"?"1,3":"2,2",opacity:y==="detailed"?.2:.3,...me},H={colorScheme:"auto",cssVars:{"--chart-line-width":y==="detailed"?"3px":"2px","--chart-point-size":y==="detailed"?"6px":"4px"},...fe},q={show:u.length>1,position:"bottom",...pe},l={enabled:(t==null?void 0:t.enabled)!==void 0?t.enabled:X,component:t==null?void 0:t.component,content:(t==null?void 0:t.content)||z,style:t==null?void 0:t.style,placement:(t==null?void 0:t.placement)||{placement:"auto",offset:{x:0,y:-10}},className:t==null?void 0:t.className,animationDuration:(t==null?void 0:t.animationDuration)||200,showDelay:(t==null?void 0:t.showDelay)||0,hideDelay:(t==null?void 0:t.hideDelay)||0,...t},p=h.useMemo(()=>({top:j?40:20,right:20,bottom:(c.label?60:40)+(q.show&&q.position==="bottom"?40:0),left:f.label?80:60}),[j,c.label,f.label,q.show,q.position]),w=P-p.left-p.right,g=L-p.top-p.bottom,k=h.useMemo(()=>u.flatMap(a=>a.data),[u]),{xScale:C,yScale:v,lineGenerator:U}=h.useMemo(()=>{if(!k.length)return{xScale:null,yScale:null,lineGenerator:null};const a=k[0].x,s=a instanceof Date,o=typeof a=="number";let e;if(s)e=Me().domain(J(k,n=>n.x)).range([0,w]);else if(o)e=ne().domain(J(k,n=>n.x)).range([0,w]);else{const n=Array.from(new Set(k.map(d=>d.x)));e=$e().domain(n).range([0,w]).padding(.1)}const i=ne().domain(J(k,n=>n.y)).nice().range([g,0]),r=O==="smooth"?Pe:O==="step"?Le:qe,m=Fe().x(n=>e(n.x)||0).y(n=>i(n.y)||0).curve(r);return{xScale:e,yScale:i,lineGenerator:m}},[k,w,g,O]),$=h.useMemo(()=>{var s;if(c.tickFormatter)return c.tickFormatter;const a=(s=k[0])==null?void 0:s.x;if(a instanceof Date){const o=Ae("%b %d");return e=>e instanceof Date?o(e):String(e)}if(typeof a=="number"){const o=ie(".2f");return e=>typeof e=="number"?o(e):String(e)}return o=>String(o)},[k,c.tickFormatter]),E=f.tickFormatter||ie(".2f"),A=h.useCallback((a,s)=>a.customColor?a.customColor:a.color&&se[a.color]?se[a.color]:oe[s%oe.length],[]),Ce=h.useMemo(()=>z||(a=>{if(!a.length)return"";const s=$(a[0].dataPoint.x);let o='<div class="db-multilinechart__tooltip-content">';return o+=`<div class="db-multilinechart__tooltip-date">${s}</div>`,a.forEach(({series:e,dataPoint:i,index:r},m)=>{const n=E(i.y),d=A(e,u.indexOf(e));o+='<div class="db-multilinechart__tooltip-series">',o+=`<div class="db-multilinechart__tooltip-series-indicator" style="background-color: ${d}"></div>`,o+=`<span class="db-multilinechart__tooltip-series-name">${e.name}:</span>`,o+=`<span class="db-multilinechart__tooltip-series-value">${n}</span>`,o+="</div>"}),o+="</div>",o}),[z,$,E,A,u]);if(h.useEffect(()=>{if(!G.current||!u.length||!C||!v||!U)return;const a=Se(G.current);a.selectAll("*").remove();const s=a.append("g").attr("transform",`translate(${p.left},${p.top})`);if(T.show&&(s.append("g").attr("class","db-multilinechart__grid db-multilinechart__grid--x").attr("transform",`translate(0,${g})`).call(re(C).tickSize(-g).tickFormat(()=>"")).selectAll("line").style("stroke-dasharray",T.strokeDasharray||"2,2").style("opacity",T.opacity||.3),s.append("g").attr("class","db-multilinechart__grid db-multilinechart__grid--y").call(le(v).tickSize(-w).tickFormat(()=>"")).selectAll("line").style("stroke-dasharray",T.strokeDasharray||"2,2").style("opacity",T.opacity||.3)),c.show){const e=s.append("g").attr("class",`db-multilinechart__axis db-multilinechart__axis--x db-multilinechart__axis--${c.variant}`).attr("transform",`translate(0,${g})`),i=re(C);c.tickCount&&i.ticks(c.tickCount),c.tickFormatter?i.tickFormat((r,m)=>c.tickFormatter(r)):i.tickFormat((r,m)=>$(r)),e.call(i)}if(f.show){const e=s.append("g").attr("class",`db-multilinechart__axis db-multilinechart__axis--y db-multilinechart__axis--${f.variant}`),i=le(v);f.tickCount&&i.ticks(f.tickCount),f.tickFormatter?i.tickFormat((r,m)=>f.tickFormatter(r)):i.tickFormat((r,m)=>E(r)),e.call(i)}if(u.forEach((e,i)=>{const r=A(e,i);if(s.append("path").datum(e.data).attr("class",`db-multilinechart__line db-multilinechart__line--series-${i}`).attr("d",U).style("stroke",r).style("stroke-width",e.strokeWidth||(y==="detailed"?3:2)).style("stroke-dasharray",e.strokeDasharray||"none"),Q){const m=s.selectAll(`.db-multilinechart__point--series-${i}`).data(e.data).enter().append("circle").attr("class",`db-multilinechart__point db-multilinechart__point--series-${i}`).attr("cx",n=>C(n.x)||0).attr("cy",n=>v(n.y)||0).attr("r",y==="detailed"?5:4).style("fill",r);B&&m.attr("tabindex",0).attr("role","button").attr("aria-label",(n,d)=>`${e.name} data point ${d+1}: ${$(n.x)}, ${E(n.y)}`).on("focus",function(n,d){const x=e.data.indexOf(d);if(l.enabled){const D=C(d.x)||0,_=v(d.y)||0,S=[{series:e,dataPoint:d,index:x}];te({x:D+p.left,y:_+p.top}),N({dataPoints:S}),V(!0)}}).on("blur",function(){l.enabled&&(V(!1),N(null))})}}),l.enabled){let e=null,i=null;const r=s.append("line").attr("class","db-multilinechart__vertical-line").attr("y1",0).attr("y2",g).style("opacity",0),m=u.map((n,d)=>{const x=A(n,d);return s.append("circle").attr("class",`db-multilinechart__hover-circle db-multilinechart__hover-circle--series-${d}`).attr("r",6).style("fill",x).style("opacity",0)});s.append("rect").attr("class","db-multilinechart__overlay").attr("width",w).attr("height",g).style("fill","none").style("pointer-events","all").on("mousemove",function(n){const[d]=Ee(n),x=[];if(u.forEach(D=>{var I;let _=D.data[0],S=0,M=Math.abs((C((I=D.data[0])==null?void 0:I.x)||0)-d);D.data.forEach((R,De)=>{const ke=C(R.x)||0,ae=Math.abs(ke-d);ae<M&&(M=ae,_=R,S=De)}),_&&x.push({series:D,dataPoint:_,index:S,distance:M})}),x.length>0){const D=x.reduce((S,M)=>M.distance<S.distance?M:S),_=C(D.dataPoint.x)||0;r.style("opacity",1).attr("x1",_).attr("x2",_),x.forEach(({series:S,dataPoint:M},I)=>{const R=v(M.y)||0;m[u.indexOf(S)].style("opacity",1).attr("cx",_).attr("cy",R)}),i&&(clearTimeout(i),i=null),l.showDelay&&l.showDelay>0?(e&&clearTimeout(e),e=window.setTimeout(()=>{o(x,_+p.left,(v(D.dataPoint.y)||0)+p.top)},l.showDelay)):o(x,_+p.left,(v(D.dataPoint.y)||0)+p.top)}}).on("mouseout",()=>{e&&(clearTimeout(e),e=null),l.hideDelay&&l.hideDelay>0?i=window.setTimeout(()=>{V(!1),N(null)},l.hideDelay):(V(!1),N(null)),r.style("opacity",0),m.forEach(n=>n.style("opacity",0))})}function o(e,i,r){const m=e.map(({series:n,dataPoint:d,index:x})=>({series:n,dataPoint:d,index:x}));te({x:i,y:r}),N({dataPoints:m}),V(!0)}if(c.label&&s.append("text").attr("class","db-multilinechart__axis-label db-multilinechart__axis-label--x").attr("transform",`translate(${w/2}, ${g+40})`).style("text-anchor","middle").text(c.label),f.label&&s.append("text").attr("class","db-multilinechart__axis-label db-multilinechart__axis-label--y").attr("transform","rotate(-90)").attr("y",0-p.left+20).attr("x",0-g/2).style("text-anchor","middle").text(f.label),j&&a.append("text").attr("class","db-multilinechart__title").attr("x",P/2).attr("y",25).style("text-anchor","middle").text(j),q.show&&u.length>1){const i=a.append("g").attr("class","db-multilinechart__legend").attr("transform",`translate(${p.left}, ${L-30})`).selectAll(".db-multilinechart__legend-item").data(u).enter().append("g").attr("class","db-multilinechart__legend-item").attr("transform",(r,m)=>`translate(${m*120}, 0)`);i.append("line").attr("x1",0).attr("x2",15).attr("y1",0).attr("y2",0).style("stroke",(r,m)=>A(r,m)).style("stroke-width",2),i.append("text").attr("x",20).attr("y",0).attr("dy","0.32em").style("font-size","12px").style("fill","#37444F").text(r=>r.name)}},[u,P,L,C,v,U,T.show,Q,X,c.label,f.label,j,p,w,g,$,E,Ce,q.show,B,T.opacity,T.strokeDasharray,c.show,c.tickCount,c.tickFormatter,c.variant,f.show,f.tickCount,f.tickFormatter,f.variant,y,l.enabled,l.showDelay,l.hideDelay,A]),!u.length)return b.jsx("div",{ref:ee,className:W("db-multilinechart","db-multilinechart--empty",Z),...Y,children:b.jsx("div",{className:"db-multilinechart__empty-state",children:b.jsx("p",{children:"No data available"})})});const ve={series:u,width:P,height:L,xScale:C,yScale:v,svgRef:G};return b.jsx(je.Provider,{value:ve,children:b.jsxs("div",{ref:ee,className:W("db-multilinechart",`db-multilinechart--${y}`,{"db-multilinechart--optimized":be,"db-multilinechart--keyboard":B},ye,Z),"data-theme":H.colorScheme!=="auto"?H.colorScheme:void 0,style:{...H.cssVars,...Y.style||{}},role:"img","aria-label":he||`Multi-line chart with ${u.length} data series`,...Y,children:[b.jsx("svg",{ref:G,className:"db-multilinechart__svg",width:P,height:L,role:"presentation","aria-hidden":"true"}),l.enabled&&F&&b.jsx(Te,{visible:_e,position:ge,tooltipStyle:l.style,placement:l.placement,animationDuration:l.animationDuration,containerDimensions:{width:P,height:L},className:W("db-multilinechart__tooltip",l.className),role:"tooltip","aria-live":"polite",children:l.component?b.jsx(l.component,{data:F.dataPoints,chartDimensions:{width:P,height:L}}):l.content?b.jsx("div",{dangerouslySetInnerHTML:{__html:l.content(F.dataPoints)}}):b.jsxs("div",{className:"db-multilinechart__tooltip-content",children:[F.dataPoints.length>0&&b.jsx("div",{className:"db-chart-tooltip__label",children:$(F.dataPoints[0].dataPoint.x)}),F.dataPoints.map(({series:a,dataPoint:s},o)=>b.jsx(we,{label:a.name,value:E(s.y),color:A(a,u.indexOf(a))},`${a.name}-${o}`))]})}),X&&!l.enabled&&b.jsx("div",{ref:xe,className:"db-multilinechart__tooltip",role:"tooltip","aria-live":"polite"})]})})});ce.displayName="MultiLineChart";ce.__docgenInfo={description:"",methods:[],displayName:"MultiLineChart",props:{series:{required:!1,tsType:{name:"Array",elements:[{name:"MultiLineChartSeries"}],raw:"MultiLineChartSeries[]"},description:"Array of data series to display",defaultValue:{value:"[]",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"Chart width",defaultValue:{value:"600",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"Chart height",defaultValue:{value:"400",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'default' | 'minimal' | 'detailed'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'minimal'"},{name:"literal",value:"'detailed'"}]},description:"Chart variant",defaultValue:{value:"'default'",computed:!1}},title:{required:!1,tsType:{name:"string"},description:"Chart title"},curve:{required:!1,tsType:{name:"union",raw:"'linear' | 'smooth' | 'step'",elements:[{name:"literal",value:"'linear'"},{name:"literal",value:"'smooth'"},{name:"literal",value:"'step'"}]},description:"Curve type",defaultValue:{value:"'smooth'",computed:!1}},xAxis:{required:!1,tsType:{name:"MultiLineChartAxis"},description:"X-axis configuration"},yAxis:{required:!1,tsType:{name:"MultiLineChartAxis"},description:"Y-axis configuration"},grid:{required:!1,tsType:{name:"MultiLineChartGrid"},description:"Grid configuration"},theme:{required:!1,tsType:{name:"MultiLineChartTheme"},description:"Theme configuration"},animation:{required:!1,tsType:{name:"MultiLineChartAnimation"},description:"Animation configuration"},legend:{required:!1,tsType:{name:"MultiLineChartLegend"},description:"Legend configuration"},showPoints:{required:!1,tsType:{name:"boolean"},description:"Show data points on the lines",defaultValue:{value:"true",computed:!1}},tooltip:{required:!1,tsType:{name:"TooltipConfig",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:"{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }",signature:{properties:[{key:"series",value:{name:"MultiLineChartSeries",required:!0}},{key:"dataPoint",value:{name:"MultiLineChartDataPoint",required:!0}},{key:"index",value:{name:"number",required:!0}}]}}],raw:"Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>"}],raw:"TooltipConfig<Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>>"},description:"Enhanced tooltip configuration"},showTooltip:{required:!1,tsType:{name:"boolean"},description:"@deprecated Use tooltip.enabled instead",defaultValue:{value:"true",computed:!1}},formatTooltip:{required:!1,tsType:{name:"signature",type:"function",raw:"(_dataPoints: Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }",signature:{properties:[{key:"series",value:{name:"MultiLineChartSeries",required:!0}},{key:"dataPoint",value:{name:"MultiLineChartDataPoint",required:!0}},{key:"index",value:{name:"number",required:!0}}]}}],raw:"Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>"},name:"_dataPoints"}],return:{name:"string"}}},description:"@deprecated Use tooltip.content instead"},showPercentageChange:{required:!1,tsType:{name:"boolean"},description:"Show percentage change in tooltip",defaultValue:{value:"false",computed:!1}},keyboard:{required:!1,tsType:{name:"boolean"},description:"Enable keyboard navigation",defaultValue:{value:"false",computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:"ARIA label for accessibility"},themeClass:{required:!1,tsType:{name:"string"},description:"Custom CSS class for theming"},optimized:{required:!1,tsType:{name:"boolean"},description:"Enable performance optimizations",defaultValue:{value:"false",computed:!1}},hoverDebounce:{required:!1,tsType:{name:"number"},description:"Debounce hover events (ms)",defaultValue:{value:"0",computed:!1}}},composes:["Omit"]};export{ce as M};
