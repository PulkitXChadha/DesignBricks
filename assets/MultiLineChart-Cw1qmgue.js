import{j as p}from"./jsx-runtime-D_zvdyIk.js";import{r as b}from"./index-Dz3UJJSw.js";import{c as H}from"./clsx-B-dksMZM.js";import{f as ie,s as Se,C as Te,D as Pe}from"./ChartTooltip-BKefWaGn.js";import{t as Le,c as Me,s as we,a as Ae}from"./step-BXfuISo5.js";import{e as U,l as Fe,c as qe}from"./line-BGdQb7_a.js";import{l as ne,a as re,b as le}from"./linear-vjb-cREh.js";import{b as $e}from"./band-DEvQ1RpF.js";import{p as Ee}from"./pointer-Drloq0xg.js";const je=b.createContext(null),se={primary:"#2272B4",secondary:"#04867D",success:"#3BA65E",warning:"#DE7921",error:"#E65B77",info:"#1890FF",neutral:"#8396A5"},oe=["#2272B4","#04867D","#3BA65E","#DE7921","#E65B77","#1890FF","#8396A5","#722ED1","#FA8C16","#13C2C2"],ce=b.forwardRef(({series:I=[],width:L=600,height:M=400,variant:h="default",title:V,curve:O="smooth",xAxis:de,yAxis:ue,grid:me,theme:fe,animation:Ve,legend:pe,showPoints:W=!0,tooltip:t,showTooltip:X=!0,formatTooltip:J,showPercentageChange:Ne=!1,keyboard:K=!1,ariaLabel:he,themeClass:ye,optimized:be=!1,hoverDebounce:Ge=0,className:Q,...z},Z)=>{const N=b.useRef(null),xe=b.useRef(null),[ge,F]=b.useState(!1),[_e,ee]=b.useState({x:0,y:0}),[w,q]=b.useState(null),c=b.useMemo(()=>I.filter(a=>a.visible!==!1),[I]),f={show:!0,position:"bottom",variant:h==="minimal"?"minimal":"default",tickCount:h==="detailed"?8:6,...de},x={show:!0,position:"left",variant:h==="minimal"?"minimal":"default",tickCount:h==="detailed"?8:6,...ue},A={show:h!=="minimal",strokeDasharray:h==="detailed"?"1,3":"2,2",opacity:h==="detailed"?.2:.3,...me},B={colorScheme:"auto",cssVars:{"--chart-line-width":h==="detailed"?"3px":"2px","--chart-point-size":h==="detailed"?"6px":"4px"},...fe},G={show:c.length>1,position:"bottom",...pe},o={enabled:(t==null?void 0:t.enabled)!==void 0?t.enabled:X,component:t==null?void 0:t.component,content:(t==null?void 0:t.content)||J,style:t==null?void 0:t.style,placement:(t==null?void 0:t.placement)||{placement:"auto",offset:{x:0,y:-10}},className:t==null?void 0:t.className,animationDuration:(t==null?void 0:t.animationDuration)||200,showDelay:(t==null?void 0:t.showDelay)||0,hideDelay:(t==null?void 0:t.hideDelay)||0,...t},u={top:V?40:20,right:20,bottom:(f.label?60:40)+(G.show&&G.position==="bottom"?40:0),left:x.label?80:60},T=L-u.left-u.right,_=M-u.top-u.bottom,k=b.useMemo(()=>c.flatMap(a=>a.data),[c]),{xScale:C,yScale:v,lineGenerator:Y}=b.useMemo(()=>{if(!k.length)return{xScale:null,yScale:null,lineGenerator:null};const a=k[0].x,l=a instanceof Date,s=typeof a=="number";let e;if(l)e=Le().domain(U(k,n=>n.x)).range([0,T]);else if(s)e=ne().domain(U(k,n=>n.x)).range([0,T]);else{const n=Array.from(new Set(k.map(d=>d.x)));e=$e().domain(n).range([0,T]).padding(.1)}const i=ne().domain(U(k,n=>n.y)).nice().range([_,0]),r=O==="smooth"?Me:O==="step"?we:qe,m=Fe().x(n=>e(n.x)||0).y(n=>i(n.y)||0).curve(r);return{xScale:e,yScale:i,lineGenerator:m}},[k,T,_,O]),$=b.useMemo(()=>{var l;if(f.tickFormatter)return f.tickFormatter;const a=(l=k[0])==null?void 0:l.x;if(a instanceof Date){const s=Ae("%b %d");return e=>e instanceof Date?s(e):String(e)}if(typeof a=="number"){const s=ie(".2f");return e=>typeof e=="number"?s(e):String(e)}return s=>String(s)},[k,f.tickFormatter]),E=x.tickFormatter||ie(".2f"),j=(a,l)=>a.customColor?a.customColor:a.color&&se[a.color]?se[a.color]:oe[l%oe.length],Ce=J||(a=>{if(!a.length)return"";const l=$(a[0].dataPoint.x);let s='<div class="db-multilinechart__tooltip-content">';return s+=`<div class="db-multilinechart__tooltip-date">${l}</div>`,a.forEach(({series:e,dataPoint:i})=>{const r=E(i.y),m=j(e,c.indexOf(e));s+='<div class="db-multilinechart__tooltip-series">',s+=`<div class="db-multilinechart__tooltip-series-indicator" style="background-color: ${m}"></div>`,s+=`<span class="db-multilinechart__tooltip-series-name">${e.name}:</span>`,s+=`<span class="db-multilinechart__tooltip-series-value">${r}</span>`,s+="</div>"}),s+="</div>",s});if(b.useEffect(()=>{if(!N.current||!c.length||!C||!v||!Y)return;const a=Se(N.current);a.selectAll("*").remove();const l=a.append("g").attr("transform",`translate(${u.left},${u.top})`);if(A.show&&(l.append("g").attr("class","db-multilinechart__grid db-multilinechart__grid--x").attr("transform",`translate(0,${_})`).call(re(C).tickSize(-_).tickFormat(()=>"")).selectAll("line").style("stroke-dasharray",A.strokeDasharray||"2,2").style("opacity",A.opacity||.3),l.append("g").attr("class","db-multilinechart__grid db-multilinechart__grid--y").call(le(v).tickSize(-T).tickFormat(()=>"")).selectAll("line").style("stroke-dasharray",A.strokeDasharray||"2,2").style("opacity",A.opacity||.3)),f.show){const e=l.append("g").attr("class",`db-multilinechart__axis db-multilinechart__axis--x db-multilinechart__axis--${f.variant}`).attr("transform",`translate(0,${_})`),i=re(C);f.tickCount&&i.ticks(f.tickCount),f.tickFormatter?i.tickFormat(r=>f.tickFormatter(r)):i.tickFormat(r=>$(r)),e.call(i)}if(x.show){const e=l.append("g").attr("class",`db-multilinechart__axis db-multilinechart__axis--y db-multilinechart__axis--${x.variant}`),i=le(v);x.tickCount&&i.ticks(x.tickCount),x.tickFormatter?i.tickFormat(r=>x.tickFormatter(r)):i.tickFormat(r=>E(r)),e.call(i)}if(c.forEach((e,i)=>{const r=j(e,i);if(l.append("path").datum(e.data).attr("class",`db-multilinechart__line db-multilinechart__line--series-${i}`).attr("d",Y).style("stroke",r).style("stroke-width",e.strokeWidth||(h==="detailed"?3:2)).style("stroke-dasharray",e.strokeDasharray||"none"),W){const m=l.selectAll(`.db-multilinechart__point--series-${i}`).data(e.data).enter().append("circle").attr("class",`db-multilinechart__point db-multilinechart__point--series-${i}`).attr("cx",n=>C(n.x)||0).attr("cy",n=>v(n.y)||0).attr("r",h==="detailed"?5:4).style("fill",r);K&&m.attr("tabindex",0).attr("role","button").attr("aria-label",(n,d)=>`${e.name} data point ${d+1}: ${$(n.x)}, ${E(n.y)}`).on("focus",function(n,d){const y=e.data.indexOf(d);if(o.enabled){const D=C(d.x)||0,g=v(d.y)||0,S=[{series:e,dataPoint:d,index:y}];ee({x:D+u.left,y:g+u.top}),q({dataPoints:S}),F(!0)}}).on("blur",function(){o.enabled&&(F(!1),q(null))})}}),o.enabled){let e=null,i=null;const r=l.append("line").attr("class","db-multilinechart__vertical-line").attr("y1",0).attr("y2",_).style("opacity",0),m=c.map((n,d)=>{const y=j(n,d);return l.append("circle").attr("class",`db-multilinechart__hover-circle db-multilinechart__hover-circle--series-${d}`).attr("r",6).style("fill",y).style("opacity",0)});l.append("rect").attr("class","db-multilinechart__overlay").attr("width",T).attr("height",_).style("fill","none").style("pointer-events","all").on("mousemove",function(n){const[d]=Ee(n),y=[];if(c.forEach(D=>{var R;let g=D.data[0],S=0,P=Math.abs((C((R=D.data[0])==null?void 0:R.x)||0)-d);D.data.forEach((te,De)=>{const ke=C(te.x)||0,ae=Math.abs(ke-d);ae<P&&(P=ae,g=te,S=De)}),g&&y.push({series:D,dataPoint:g,index:S,distance:P})}),y.length>0){const D=y.reduce((S,P)=>P.distance<S.distance?P:S),g=C(D.dataPoint.x)||0;r.style("opacity",1).attr("x1",g).attr("x2",g),y.forEach(({series:S,dataPoint:P})=>{const R=v(P.y)||0;m[c.indexOf(S)].style("opacity",1).attr("cx",g).attr("cy",R)}),i&&(clearTimeout(i),i=null),o.showDelay&&o.showDelay>0?(e&&clearTimeout(e),e=window.setTimeout(()=>{s(y,g+u.left,(v(D.dataPoint.y)||0)+u.top)},o.showDelay)):s(y,g+u.left,(v(D.dataPoint.y)||0)+u.top)}}).on("mouseout",()=>{e&&(clearTimeout(e),e=null),o.hideDelay&&o.hideDelay>0?i=window.setTimeout(()=>{F(!1),q(null)},o.hideDelay):(F(!1),q(null)),r.style("opacity",0),m.forEach(n=>n.style("opacity",0))})}function s(e,i,r){const m=e.map(({series:n,dataPoint:d,index:y})=>({series:n,dataPoint:d,index:y}));ee({x:i,y:r}),q({dataPoints:m}),F(!0)}if(f.label&&l.append("text").attr("class","db-multilinechart__axis-label db-multilinechart__axis-label--x").attr("transform",`translate(${T/2}, ${_+40})`).style("text-anchor","middle").text(f.label),x.label&&l.append("text").attr("class","db-multilinechart__axis-label db-multilinechart__axis-label--y").attr("transform","rotate(-90)").attr("y",0-u.left+20).attr("x",0-_/2).style("text-anchor","middle").text(x.label),V&&a.append("text").attr("class","db-multilinechart__title").attr("x",L/2).attr("y",25).style("text-anchor","middle").text(V),G.show&&c.length>1){const i=a.append("g").attr("class","db-multilinechart__legend").attr("transform",`translate(${u.left}, ${M-30})`).selectAll(".db-multilinechart__legend-item").data(c).enter().append("g").attr("class","db-multilinechart__legend-item").attr("transform",(r,m)=>`translate(${m*120}, 0)`);i.append("line").attr("x1",0).attr("x2",15).attr("y1",0).attr("y2",0).style("stroke",(r,m)=>j(r,m)).style("stroke-width",2),i.append("text").attr("x",20).attr("y",0).attr("dy","0.32em").style("font-size","12px").style("fill","#37444F").text(r=>r.name)}},[c,L,M,C,v,Y,A.show,W,X,f.label,x.label,V,u,T,_,$,E,Ce,G.show]),!c.length)return p.jsx("div",{ref:Z,className:H("db-multilinechart","db-multilinechart--empty",Q),...z,children:p.jsx("div",{className:"db-multilinechart__empty-state",children:p.jsx("p",{children:"No data available"})})});const ve={series:c,width:L,height:M,xScale:C,yScale:v,svgRef:N};return p.jsx(je.Provider,{value:ve,children:p.jsxs("div",{ref:Z,className:H("db-multilinechart",`db-multilinechart--${h}`,{"db-multilinechart--optimized":be,"db-multilinechart--keyboard":K},ye,Q),"data-theme":B.colorScheme!=="auto"?B.colorScheme:void 0,style:{...B.cssVars,...z.style||{}},role:"img","aria-label":he||`Multi-line chart with ${c.length} data series`,...z,children:[p.jsx("svg",{ref:N,className:"db-multilinechart__svg",width:L,height:M,role:"presentation","aria-hidden":"true"}),o.enabled&&w&&p.jsx(Te,{visible:ge,position:_e,tooltipStyle:o.style,placement:o.placement,animationDuration:o.animationDuration,containerDimensions:{width:L,height:M},className:H("db-multilinechart__tooltip",o.className),role:"tooltip","aria-live":"polite",children:o.component?p.jsx(o.component,{data:w.dataPoints,chartDimensions:{width:L,height:M}}):o.content?p.jsx("div",{dangerouslySetInnerHTML:{__html:o.content(w.dataPoints)}}):p.jsxs("div",{className:"db-multilinechart__tooltip-content",children:[w.dataPoints.length>0&&p.jsx("div",{className:"db-chart-tooltip__label",children:$(w.dataPoints[0].dataPoint.x)}),w.dataPoints.map(({series:a,dataPoint:l},s)=>p.jsx(Pe,{label:a.name,value:E(l.y),color:j(a,c.indexOf(a))},`${a.name}-${s}`))]})}),X&&!o.enabled&&p.jsx("div",{ref:xe,className:"db-multilinechart__tooltip",role:"tooltip","aria-live":"polite"})]})})});ce.displayName="MultiLineChart";ce.__docgenInfo={description:"",methods:[],displayName:"MultiLineChart",props:{series:{required:!1,tsType:{name:"Array",elements:[{name:"MultiLineChartSeries"}],raw:"MultiLineChartSeries[]"},description:"Array of data series to display",defaultValue:{value:"[]",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"Chart width",defaultValue:{value:"600",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"Chart height",defaultValue:{value:"400",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'default' | 'minimal' | 'detailed'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'minimal'"},{name:"literal",value:"'detailed'"}]},description:"Chart variant",defaultValue:{value:"'default'",computed:!1}},title:{required:!1,tsType:{name:"string"},description:"Chart title"},curve:{required:!1,tsType:{name:"union",raw:"'linear' | 'smooth' | 'step'",elements:[{name:"literal",value:"'linear'"},{name:"literal",value:"'smooth'"},{name:"literal",value:"'step'"}]},description:"Curve type",defaultValue:{value:"'smooth'",computed:!1}},xAxis:{required:!1,tsType:{name:"MultiLineChartAxis"},description:"X-axis configuration"},yAxis:{required:!1,tsType:{name:"MultiLineChartAxis"},description:"Y-axis configuration"},grid:{required:!1,tsType:{name:"MultiLineChartGrid"},description:"Grid configuration"},theme:{required:!1,tsType:{name:"MultiLineChartTheme"},description:"Theme configuration"},animation:{required:!1,tsType:{name:"MultiLineChartAnimation"},description:"Animation configuration"},legend:{required:!1,tsType:{name:"MultiLineChartLegend"},description:"Legend configuration"},showPoints:{required:!1,tsType:{name:"boolean"},description:"Show data points on the lines",defaultValue:{value:"true",computed:!1}},tooltip:{required:!1,tsType:{name:"TooltipConfig",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:"{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }",signature:{properties:[{key:"series",value:{name:"MultiLineChartSeries",required:!0}},{key:"dataPoint",value:{name:"MultiLineChartDataPoint",required:!0}},{key:"index",value:{name:"number",required:!0}}]}}],raw:"Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>"}],raw:"TooltipConfig<Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>>"},description:"Enhanced tooltip configuration"},showTooltip:{required:!1,tsType:{name:"boolean"},description:"@deprecated Use tooltip.enabled instead",defaultValue:{value:"true",computed:!1}},formatTooltip:{required:!1,tsType:{name:"signature",type:"function",raw:"(_dataPoints: Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }",signature:{properties:[{key:"series",value:{name:"MultiLineChartSeries",required:!0}},{key:"dataPoint",value:{name:"MultiLineChartDataPoint",required:!0}},{key:"index",value:{name:"number",required:!0}}]}}],raw:"Array<{ series: MultiLineChartSeries; dataPoint: MultiLineChartDataPoint; index: number }>"},name:"_dataPoints"}],return:{name:"string"}}},description:"@deprecated Use tooltip.content instead"},showPercentageChange:{required:!1,tsType:{name:"boolean"},description:"Show percentage change in tooltip",defaultValue:{value:"false",computed:!1}},keyboard:{required:!1,tsType:{name:"boolean"},description:"Enable keyboard navigation",defaultValue:{value:"false",computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:"ARIA label for accessibility"},themeClass:{required:!1,tsType:{name:"string"},description:"Custom CSS class for theming"},optimized:{required:!1,tsType:{name:"boolean"},description:"Enable performance optimizations",defaultValue:{value:"false",computed:!1}},hoverDebounce:{required:!1,tsType:{name:"number"},description:"Debounce hover events (ms)",defaultValue:{value:"0",computed:!1}}},composes:["Omit"]};export{ce as M};
